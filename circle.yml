general:
  artifacts:
    - "coverage"

machine:
  php:
    version: 5.6.22
  node:
    version: 4.2.6

dependencies:
  override:
    - composer install --no-interaction
  cache_directories:
    - ~/.composer/cache

test:
  pre:
    - mkdir -p $CIRCLE_TEST_REPORTS/phpunit
  override:
    - php ./vendor/bin/phpunit -c phpunit.xml.dist --log-junit $CIRCLE_TEST_REPORTS/phpunit/junit.xml
  post:
    - php ./vendor/bin/coveralls

notify:
  webhooks:
    - url: https://coveralls.io/webhook?repo_token=$COVERALLS_REPO_TOKEN
